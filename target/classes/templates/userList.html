<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layouts/base">
<head>
<title>ユーザー一覧</title>
</head>
<body>
	<div layout:fragment="content">

		<h1>ユーザー一覧</h1>
		<h2>
			<a href="main.html">mainに戻る</a>
		</h2>

		<div id="app">
			<div>
				<ul>
					<template v-for="user in result.list">
					<input class="jsc-user-id" type="hidden" name="user_id" value="{{ user.id }}" />
					<p>{{ user.username }}</p>
						<button class="jsc-follow" v-on:click="follow">フォローする</button>
					</template>
				</ul>
			</div>
		</div>
		<script>
			new Vue({
				el : '#app',
				data : {
					result : {
						list : []
					}
				},
				methods: {
					follow: function(event){
						debugger;
						var $d = $(this).closest(".jsc-user-id");
						alert($(this).closest(".jsc-user-id").val());
					}
				},
				created : function() {
					var that = this;
					$.ajax({
						type : "GET",
						url : "/users",
						dataType : "json",
						success : function(list) {
							// 成功時の処理としてリスト形式の結果を代入する
							// e.g. [{"title": "hoge", "text": "hogehoge"}, ...]
							that.result.list = list;
						}
					});
				}
			})
			

		</script>
	</div>

</body>
</html>